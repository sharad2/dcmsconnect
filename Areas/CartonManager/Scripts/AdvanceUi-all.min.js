function PlaySound(n){try{$("#sound_"+n)[0].play()}catch(t){}}$(document).ready(function(){$("#tbScan").handlescan({formMain:"#frmMain"});$("#btnUpdate").button().click(function(){$("#frmMain").valid()&&($("span.field-validation-error").removeClass("field-validation-error").addClass("field-validation-valid"),$("#divUpdate").dialog("open"))});$("#divUpdate").dialog({title:"Scan Cartons/Pallet",autoOpen:!1,width:400,modal:!0,closeOnEscape:!1,open:function(){$("#tbScan").handlescan("clearErrors");$("#tbConfirm").val("")},buttons:[{text:"Go",click:function(){var n=$("#tbScan");if(n.val())n.handlescan("scan");else return $("#ajaxErrors").html("Please scan carton/pallet."),$("#ajaxErrors").show().removeClass("success-display").addClass("field-validation-error"),!1}},{text:"Close",click:function(){$(this).dialog("close")}}]});$("#cbqReworkStatus").change(function(){var n=$(this).is(":checked");n?$("#rbqDoesNotNeedRework,#rbqNeedsRework").removeAttr("disabled").eq(0).attr("checked","checked"):$("#rbqDoesNotNeedRework,#rbqNeedsRework").attr("disabled","disabled").removeAttr("checked")});$("#cbqUpdateReworkStatus").change(function(){var n=$(this).is(":checked");n?($(this).val("Y"),$("#rbuCompleteRework,#rbuNotSet").removeAttr("disabled").eq(0).attr("checked","checked")):($("#rbuCompleteRework,#rbuNotSet").attr("disabled","disabled").removeAttr("checked"),$(this).val(""))});$("#cbremoveFromPallet").change(function(){var n=$(this).is(":checked");n?($(this).val("true"),$("#tbPallet").attr("disabled","disabled")):($("#tbPallet").removeAttr("disabled"),$(this).val(""))})});$(document).ready(function(){$("form").submit(function(){return!1});$("#tbMultiField").rules("add",{updatable:!0});$("#tbUpdatePieces").rules("add",{notequal:"#tbQualifyPieces",messages:{notequal:"Qualifying pieces cannot be same as pieces to update"}});$("#ddlUpdateQuality").rules("add",{notequal:"#ddlQualifyingQuality",messages:{notequal:"Qualifying quality code cannot be same as quality code to update"}});$("#ddlUpdateVwhId").rules("add",{notequal:"#ddlQualifyingVwhId",messages:{notequal:"Qualifying virtual warehouse cannot be same as virtual warehouse to update"}});$("#tbUpdateSKU").rules("add",{notequal:"#tbQualifyingSKU",messages:{notequal:"Qualifying SKU cannot be same as SKU to update"}});$("#ddlPriceSeasonCode").rules("add",{notequal:"#ddlQualifyingPriceSeasonCode",messages:{notequal:"Qualifying season code cannot be same as season code to update"}});$("#tbScan").rules("add",{notequal:"#tbPallet",messages:{notequal:"Pallet to move cannot be same as pallet scanned"}})});$.validator.addMethod("updatable",function(){var n=!0;return $(".update-rule").each(function(){if($(this).val())return n=!1,!1}),!n},"Please specify something to update or move");$.validator.addMethod("notequal",function(n,t,i){var r=$(i).val();return r&&n&&r==n?!1:!0}),function(n){n.widget("ui.autocompleteEx",n.ui.autocomplete,{widgetEventPrefix:"autocomplete",_create:function(){var t=this,i;this.options.source=function(i,r){n.ajax({url:t.element.attr("data-ac-list-url"),dataType:"json",data:{term:i.term},success:function(n){r(n)},error:function(n){alert(n.responseText)}})};this.options.autoFocus=!1;this.options.delay=2e3;this.options.minLength=2;n.ui.autocomplete.prototype._create.apply(this,arguments);this.element.dblclick(function(){var n=t.options.minLength;t.options.minLength=0;t.search();t.options.minLength=n});i=t.element.attr("data-ac-validate-url");i&&this.element.rules("add",{remote:{url:t.element.attr("data-ac-validate-url"),async:!1,dataType:"json",beforeSend:function(){t.element.addClass("ui-autocomplete-loading")},dataFilter:function(i){var r=n.parseJSON(i),u;return n.isPlainObject(r)?(t._selectValue(r),JSON.stringify(!0)):(u=n.validator.format("span[data-ac-msg-for='{0}']",t.element.attr("name")),n(u).empty(),i)},complete:function(){t.element.removeClass("ui-autocomplete-loading")},error:function(n){alert(n.responseText)}}})},_trigger:function(t,i,r){var e=n.ui.autocomplete.prototype._trigger.apply(this,arguments),f,u;switch(t){case"select":return this._selectValue(r.item),f=this.element.closest("form").validate(),u=f.previousValue(this.element[0]),u.old=r.item.shortName,u.valid=!0,!1}return e},_selectValue:function(t){this.element.val(t.shortName||t.value).removeClass("input-validation-error");this.element.prev("input:hidden").val(t.value);var r=this.element.attr("name"),i=n.validator.format("span[data-ac-msg-for='{0}']",r);n(i).html(t.label);i=n.validator.format("span[data-valmsg-for='{0}']",r);n(i).removeClass("field-validation-error").addClass("field-validation-valid")},clear:function(){this._selectValue({value:"",label:"",shortName:""});var t=this.element.closest("form").validate(),n=t.previousValue(this.element[0]);n.old=null;n.valid=!0}})}(jQuery);$.validator.setDefaults({onkeyup:!1,onfocusout:!1});$(document).ready(function(){$("input[data-ac-list-url]").autocompleteEx()});$.widget("ui.handlescan",{options:{formMain:null,errors:"#ajaxErrors",action:null,confirmInput:"#tbConfirm"},_create:function(){var n=this;this.element.keypress(function(t){if(t.keyCode===$.ui.keyCode.ENTER&&$(this).val())return n.scan(),!1})},scan:function(){var t=this.element.closest("form"),n;if(t.valid()){if(n=t.serializeArray(),this.options.formMain){if(!$(this.options.formMain).valid())return;n=n.concat($(this.options.formMain).serializeArray())}$.ajax({cache:!1,async:!1,url:this.options.action&&this.options.action()||t.attr("action"),data:n,context:this,type:"POST",statusCode:{202:function(n){PlaySound("success");$(this.options.errors).html(n).removeClass("field-validation-error").addClass("success-display")},203:function(n){PlaySound("error");$(this.options.errors).show().html(n).removeClass("success-display").addClass("field-validation-error")},201:function(n,t,i){$(this.options.confirmInput).val(i.getResponseHeader("ConfirmScan"));$(this.options.errors).show().html(n).addClass("success-display").removeClass("field-validation-error")},200:function(n){PlaySound("error");alert(n);alert("Refreshing the page will solve this problem.")}},success:function(n,t,i){this._trigger("success",null,{jq:i});$("#tbConfirm").val("")},error:function(n){PlaySound("error");$(this.options.errors,this.element).html(n.responseText)},beforeSend:function(){this.element.addClass("ui-autocomplete-loading")},complete:function(){this.element.removeClass("ui-autocomplete-loading");this.element.val("")}})}},clearErrors:function(){var n=this.element.closest("form");$(this.options.errors).empty();this.element.val("").removeClass("input-validation-error");$("span.field-validation-error",n).removeClass("field-validation-error").addClass("field-validation-valid")}});$(document).ready(function(){$("#tbPallet").change(function(){if(!$(this).closest("form").validate().element($(this)))return!1;$.ajax({url:$(this).attr("data-validate-url"),data:{palletId:$(this).val()},context:this,type:"GET",cache:!1,success:function(n){PlaySound("success");$("#spnPalletInfo").html("<br/>"+n)},error:function(n){alert(n.responseText)}})})});