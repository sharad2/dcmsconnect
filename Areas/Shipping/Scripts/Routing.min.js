$(document).ready(function(){function n(){var n=$("tbody tr.ui-selected").not(".text-changed");n.length>=0&&$("span.spnPOSelected").text("Total : "+n.length+" POs selected")}$("#cbShowRouted").change(function(){$("#frmShowRouted").submit()});$("#tbDC").change(function(){$.ajax({cache:!1,url:$("#tbDC").attr("data-validate-url").replace("~",$("#tbDC").val()),type:"POST",context:this,success:function(n,t,i){if(i.status==203){alert(n);return}},error:function(n){alert(n.responseText)}})});$("#dlgRoutingEditor").dialog({autoOpen:!1,modal:!1,title:"Update Routing Information",dialogClass:"routing-editor",create:function(){var t=this,n=!1;$("#btnRoutingEditor").click(function(i){n||$(t).dialog("option","position",{my:"left bottom",at:"left bottom",of:$(i.target)}).dialog("open")}).button().draggable({start:function(){n=!0},stop:function(){setTimeout(function(){n=!1},0)}})},open:function(){$("#btnRoutingEditor").hide()},beforeClose:function(){$("#btnRoutingEditor").show()},buttons:[{text:"Apply",click:function(){var n,t;if($("input:checkbox:checked",this).length==0){alert("Please select something to update");return}if(n=$("#divEdiList tbody input:checkbox:checked"),n.length==0){alert("Please select some POs to apply the routing information to");return}t=$("form",this);n.clone().appendTo(t);t.submit()}},{text:"Cancel",click:function(){$(this).dialog("close")}}]}).on("change","input",function(){$("#divEdiList tbody input:checked").change()}).on("keyup","input:text",function(){$(this).val()&&$("#cb"+$(this).attr("id")).prop("checked",!0)});$("#divEdiList").on("change","table thead input:checkbox",function(){var t=$(this).is(":checked"),i;return t?$("tbody :checkbox",$(this).closest("table")).each(function(){this.checked=!0}):$("tbody :checkbox",$(this).closest("table")).each(function(){this.checked=!1}),i=$("tbody tr.ui-selectee",$(this).closest("table")),i.toggleClass("ui-selected",t),n(),!0}).on("change","tbody input:checkbox",function(){var i=$(this).closest("tr"),t=$(this).is(":checked");i.find("td.ui-selectee").toggleClass("ui-selected",t);n();$("#dlgRoutingEditor input:text").each(function(){$("#cb"+$(this).attr("id")).is(":checked")?i.find("label[for="+$(this).attr("id")+"]").toggleClass("text-changed",t).next("span").text(t?$(this).val():"").toggle(t):i.find("label[for="+$(this).attr("id")+"]").removeClass("text-changed").next("span").empty().hide()})}).on("click","div.ui-icon-close",function(t){if(!confirm("Do you want to remove this order "))return!1;$.ajax({cache:!1,url:$(t.delegateTarget).attr("data-delete-url").replace("~",$(this).attr("data-key")),type:"POST",context:this,success:function(t,i,r){if(r.status==203){alert(t);return}$(this).parents("tr").addClass("text-changed ui-state-disabled").removeClass("ui-selected ui-selectee").find("div").removeClass("ui-icon ui-icon-close").text("Done");n()},error:function(n){alert(n.responseText)}})}).find("tbody").selectable({filter:"tr:not(.ui-state-disabled)",cancel:"tr.ui-state-disabled,td:has(.ui-icon-close,.ui-icon-contact)",stop:function(){$("tr",this).each(function(){var n=$("input:checkbox",this),t=$(this).is(".ui-selected");n.prop("checked")!=t&&n.prop("checked",t).change()})}}).end().tooltip({content:function(){return $(this).next().html()},items:"span.ui-icon.ui-icon-alert"});$("#tbCarrier").autocomplete({minLength:0,source:$("#tbCarrier").attr("data-carrier-autocomplete"),change:function(n,t){t.item==null&&$.ajax({cache:!1,url:$(this).attr("data-validate-carrier").replace("~",$(this).val()),type:"POST",context:this,success:function(n,t,i){if(i.status==203){alert(n);$(this).val("");$("#cbtbCarrier").removeAttr("checked");return}},error:function(n){alert(n.responseText)}});$(this).change()},select:function(){$("#cbtbCarrier").prop("checked",!0)},autoFocus:!0}).dblclick(function(){$(this).autocomplete("search")});$("#tbPickupDate").datepicker({showOn:"button",buttonImage:$("#tbPickupDate").attr("data-calendar-img"),buttonImageOnly:!0,dateFormat:"m/d/yy",onSelect:function(){$("#cbtbPickupDate").prop("checked",!0);$(this).change()}});$("#tbStartDate,#tbDcCancelDate").datepicker({showOn:"button",buttonImage:$("#tbStartDate,#tbDcCancelDate").attr("data-calendar-img"),buttonImageOnly:!0,dateFormat:"m/d/yy"});$("#quicklist").on("click",'a[href^="#"]',function(n){$("a",n.delegateTarget).removeClass("ui-state-highlight");$(this).addClass("ui-state-highlight");$("table caption").removeClass("ui-state-highlight");$("caption",$(this).attr("href")).addClass("ui-state-highlight")});$("#btnApplyFilter").button()});$(function(){$.widget("ui.selectable",$.ui.selectable,{_mouseStart:function(n){n.ctrlKey=!0;this._super(n)},_mouseDrag:function(n){n.ctrlKey=!0;this._super(n)},_mouseStop:function(n){n.ctrlKey=!0;this._super(n)},_trigger:function(n,t,i){n=="selecting"&&$(i.selecting).addClass("ui-selected");this._super(n,t,i)}})});