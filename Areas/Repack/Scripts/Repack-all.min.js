$.validator.addMethod("requiredif",function(n,t,i){var f="input[name="+i.dependentproperty+"]",r=i.targetvalue;r=(r==null?"":r).toString();var u=$(f),e=u.attr("type"),o=e==="checkbox"?u.is(":checked"):u.val();return r===o.toString()?$.validator.methods.required.call(this,n,t,i):!0});$.validator.unobtrusive.adapters.add("requiredif",["dependentproperty","targetvalue"],function(n){n.rules.requiredif={dependentproperty:n.params.dependentproperty,targetvalue:n.params.targetvalue};n.messages.requiredif=n.message});$.validator.setDefaults({onkeyup:!1});$(document).ready(function(){$("#cbScanCarton").change(function(){var n=$(this).is(":checked");$("#divCartonId").toggle(n);$("#divNoOfCartons").toggle(!n);n||$("#tbCartonId").val("")}).change();$("#cbConversion").each(function(){$(this).change(function(){var n=$(this).is(":checked");$("#divConversion").toggle(n)}).change()})});$(document).ready(function(){$("#ddlDestinationArea").change(function(){var n=$('optgroup:has(option[value="'+$(this).val()+'"])',this).attr("label");n&&(n.indexOf("P")==0?($("#tbPalletId").rules("add",{required:!0,messages:{required:"Pallet is required for this area"}}),$("sup.ui-helper-hidden").show()):($("#tbPalletId").rules("remove","required"),$("sup.ui-helper-hidden").hide()),$("span[for='tbPalletId']").hide(),$("#tbPalletId").removeClass("input-validation-error"))})});$.widget("ui.autocomplete",$.ui.autocomplete,{_change:function(n){this._trigger("change",n,{item:this.selectedItem})}});$(document).ready(function(){$("form").submit(function(){return!1});$("#btnRepack").click(function(){$("#frmMain").valid()&&$("#divCreate").dialog("open")}).button();$("#divCreate").dialog({title:"Repack",autoOpen:!1,width:500,closeOnEscape:!1,create:function(){var n=this;$("input:text[data-url]",this).each(function(t,i){$(i).autocomplete({delay:2e3,minLength:1,source:$(i).attr("data-url"),change:function(t,i){var u=$("span[data-valmsg-for="+this.name+"]",n).removeClass("field-validation-valid field-validation-error").addClass("field-validation-description").empty(),r=$(this).val();if(!r){$("span[data-valmsg-for="+this.name+"]",n).removeClass("field-validation-description").addClass("field-validation-error");return}if(i.item&&i.item.value==r){u.html(i.item.standardSkuSize==null?i.item.label:i.item.label+"<br>Standard Quantity "+i.item.standardSkuSize);return}$.getJSON($(this).autocomplete("option","source"),{term:r},$.proxy(function(n){n&&n.length>0&&n[0].value==this.val?u.html(n[0].standardSkuSize==null?n[0].label:n[0].label+"<br> Standard Quantity "+n[0].standardSkuSize):u.text("Bad choice")},{val:r}))}}).on("dblclick",function(){$(this).autocomplete("option","minLength",0).autocomplete("search","").autocomplete("option","minLength",1)})})},buttons:[{text:"Reset",click:function(){$("#ajaxErrors").empty();$("input:text, select",this).val("").removeClass("input-validation-error");$("span.field-validation-error",this).removeClass("field-validation-error").addClass("field-validation-valid");$("input:tabbable:first",$("#divCreate")).focus();$('span[data-valmsg-for="SkuBarCode"]').text("");$('span[data-valmsg-for="TargetSkuBarCode"]').text("")}},{text:"Create",click:function(){var n=$("form:first",this),t;$("#frmMain").valid()&&n.valid()&&$.ajax({cache:!1,url:n.attr("action"),data:n.serializeArray().concat($("#frmMain").serializeArray()),context:this,type:"POST"}).done(function(n){$("#ajaxErrors",this).html(n);$("input:text",this).val("")}).error(function(n){$("#ajaxErrors",this).html(n.responseText)});t=$("input:tabbable:first",this);setTimeout(function(){t.focus()},0)}},{text:"Close",click:function(){$(this).dialog("close")}}]}).on("keydown","input,select",function(n){if(n.keyCode===$.ui.keyCode.ENTER){var t=$("input:text:visible,select:visible",n.delegateTarget),i=t.index(this);i+1<t.length?t.eq(i+1).focus():$(n.delegateTarget).closest("div.ui-dialog").find(".ui-dialog-buttonpane button:eq(1)").click()}})});